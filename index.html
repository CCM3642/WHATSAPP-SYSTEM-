<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Advanced Customer Management System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --success-gradient: linear-gradient(135deg, #28a745, #20c997);
      --warning-gradient: linear-gradient(135deg, #ffc107, #ff9800);
      --danger-gradient: linear-gradient(135deg, #dc3545, #fd7e14);
      --info-gradient: linear-gradient(135deg, #17a2b8, #6c757d);
      --dark-gradient: linear-gradient(135deg, #343a40, #495057);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
    }

    /* Sidebar Navigation */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 250px;
      background: var(--dark-gradient);
      color: white;
      padding: 20px;
      overflow-y: auto;
      z-index: 1000;
      transition: transform 0.3s ease;
    }

    .sidebar.collapsed {
      transform: translateX(-250px);
    }

    .sidebar-header {
      padding: 20px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 20px;
    }

    .sidebar-menu {
      list-style: none;
      padding: 0;
    }

    .sidebar-menu li {
      margin-bottom: 10px;
    }

    .sidebar-menu a {
      color: rgba(255,255,255,0.8);
      text-decoration: none;
      padding: 12px 15px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      transition: all 0.3s;
    }

    .sidebar-menu a:hover,
    .sidebar-menu a.active {
      background: rgba(255,255,255,0.1);
      color: white;
    }

    .sidebar-menu i {
      margin-right: 10px;
      font-size: 1.2rem;
    }

    /* Main Content */
    .main-content {
      margin-left: 250px;
      padding: 20px;
      transition: margin-left 0.3s ease;
    }

    .main-content.expanded {
      margin-left: 0;
    }

    /* Header */
    .header {
      background: white;
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 25px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.08);
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .menu-toggle {
      background: var(--primary-gradient);
      color: white;
      border: none;
      border-radius: 10px;
      padding: 10px 15px;
      margin-right: 15px;
      cursor: pointer;
    }

    /* Stats Cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.08);
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-gradient);
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.12);
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .stat-label {
      color: #6c757d;
      font-size: 0.9rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .stat-icon {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2.5rem;
      opacity: 0.1;
      color: #667eea;
    }

    /* Content Cards */
    .content-card {
      background: white;
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 25px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.08);
    }

    .card-header-custom {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f0f0f0;
    }

    /* Forms */
    .form-floating-custom {
      position: relative;
      margin-bottom: 20px;
    }

    .form-control-custom {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e9ecef;
      border-radius: 10px;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .form-control-custom:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
    }

    /* Buttons */
    .btn-gradient {
      background: var(--primary-gradient);
      color: white;
      border: none;
      border-radius: 10px;
      padding: 12px 25px;
      font-weight: 600;
      transition: all 0.3s;
    }

    .btn-gradient:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .btn-success-gradient {
      background: var(--success-gradient);
    }

    .btn-danger-gradient {
      background: var(--danger-gradient);
    }

    /* Data Table */
    .data-table {
      width: 100%;
      border-collapse: collapse;
    }

    .data-table thead {
      background: var(--primary-gradient);
      color: white;
    }

    .data-table th {
      padding: 15px;
      text-align: left;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.85rem;
      letter-spacing: 1px;
    }

    .data-table td {
      padding: 15px;
      border-bottom: 1px solid #f0f0f0;
    }

    .data-table tbody tr {
      transition: all 0.2s;
    }

    .data-table tbody tr:hover {
      background: #f8f9fa;
    }

    /* Status Badges */
    .status-badge {
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      display: inline-block;
    }

    .status-active {
      background: var(--success-gradient);
      color: white;
    }

    .status-inactive {
      background: var(--warning-gradient);
      color: white;
    }

    .status-optout {
      background: var(--danger-gradient);
      color: white;
    }

    /* Action Buttons */
    .action-buttons {
      display: flex;
      gap: 5px;
    }

    .btn-action {
      padding: 5px 10px;
      border-radius: 5px;
      border: none;
      font-size: 0.9rem;
      transition: all 0.2s;
    }

    .btn-action:hover {
      transform: scale(1.1);
    }

    /* Message Progress */
    .message-progress {
      background: #f8f9fa;
      border-radius: 15px;
      padding: 20px;
      margin-top: 20px;
      display: none;
    }

    .message-progress.active {
      display: block;
    }

    .progress-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      margin: 5px 0;
      background: white;
      border-radius: 8px;
      transition: all 0.3s;
    }

    .progress-item.sending {
      background: #fff3cd;
    }

    .progress-item.sent {
      background: #d4edda;
    }

    .progress-item.failed {
      background: #f8d7da;
    }

    /* Charts */
    .chart-container {
      position: relative;
      height: 300px;
      margin-bottom: 20px;
    }

    /* Modal Customizations */
    .modal-content {
      border-radius: 20px;
      border: none;
    }

    .modal-header {
      background: var(--primary-gradient);
      color: white;
      border-radius: 20px 20px 0 0;
      border: none;
    }

    .modal-header .btn-close {
      filter: brightness(0) invert(1);
    }

    /* Loading Spinner */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255,255,255,0.95);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    .loading-overlay.active {
      display: flex;
    }

    /* Toast Notifications */
    .toast-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
    }

    .custom-toast {
      min-width: 300px;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.15);
    }

    /* WhatsApp Links */
    .whatsapp-links {
      background: #f0f8ff;
      border-radius: 15px;
      padding: 20px;
      margin-top: 20px;
      display: none;
    }

    .whatsapp-links.active {
      display: block;
    }

    .whatsapp-link-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      margin: 5px 0;
      background: white;
      border-radius: 8px;
      transition: all 0.3s;
    }

    .whatsapp-link-item:hover {
      transform: translateX(5px);
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-250px);
      }
      
      .sidebar.active {
        transform: translateX(0);
      }
      
      .main-content {
        margin-left: 0;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Animations */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    /* Quick Actions */
    .quick-actions {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .quick-action-btn {
      padding: 10px 20px;
      border-radius: 10px;
      border: 2px solid #e9ecef;
      background: white;
      transition: all 0.3s;
      cursor: pointer;
    }

    .quick-action-btn:hover {
      border-color: #667eea;
      background: #f0f4ff;
    }

    .quick-action-btn.active {
      background: var(--primary-gradient);
      color: white;
      border-color: transparent;
    }

    /* Customer Tags */
    .customer-tags {
      display: flex;
      gap: 5px;
      flex-wrap: wrap;
      margin-top: 5px;
    }

    .tag {
      padding: 3px 8px;
      background: #e9ecef;
      border-radius: 5px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .tag.premium {
      background: var(--warning-gradient);
      color: white;
    }

    .tag.vip {
      background: var(--primary-gradient);
      color: white;
    }
  </style>
</head>
<body>
  <!-- Sidebar Navigation -->
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h4><i class="bi bi-people-fill me-2"></i>CRM System</h4>
    </div>
    <ul class="sidebar-menu">
      <li><a href="#" class="active" onclick="showSection('dashboard')"><i class="bi bi-speedometer2"></i> Dashboard</a></li>
      <li><a href="#" onclick="showSection('customers')"><i class="bi bi-people"></i> Customers</a></li>
      <li><a href="#" onclick="showSection('add-customer')"><i class="bi bi-person-plus"></i> Add Customer</a></li>
      <li><a href="#" onclick="showSection('messaging')"><i class="bi bi-chat-dots"></i> Messaging</a></li>
      <li><a href="#" onclick="showSection('analytics')"><i class="bi bi-graph-up"></i> Analytics</a></li>
      <li><a href="#" onclick="showSection('settings')"><i class="bi bi-gear"></i> Settings</a></li>
    </ul>
  </nav>

  <!-- Main Content -->
  <main class="main-content" id="mainContent">
    <!-- Header -->
    <div class="header">
      <div class="header-top">
        <div style="display: flex; align-items: center;">
          <button class="menu-toggle" onclick="toggleSidebar()">
            <i class="bi bi-list"></i>
          </button>
          <h2 class="mb-0">Customer Management System</h2>
        </div>
        <div>
          <button class="btn btn-gradient me-2" onclick="exportData()">
            <i class="bi bi-download me-2"></i>Export
          </button>
          <button class="btn btn-success-gradient" onclick="quickAddCustomer()">
            <i class="bi bi-plus-circle me-2"></i>Quick Add
          </button>
        </div>
      </div>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboard-section" class="section">
      <!-- Stats Grid -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="totalCustomers">0</div>
          <div class="stat-label">Total Customers</div>
          <i class="bi bi-people stat-icon"></i>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="activeCustomers">0</div>
          <div class="stat-label">Active</div>
          <i class="bi bi-person-check stat-icon"></i>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="newThisMonth">0</div>
          <div class="stat-label">New This Month</div>
          <i class="bi bi-calendar-plus stat-icon"></i>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="messagesSent">0</div>
          <div class="stat-label">Messages Sent</div>
          <i class="bi bi-send stat-icon"></i>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="content-card">
        <h4 class="mb-3">Quick Actions</h4>
        <div class="quick-actions">
          <button class="quick-action-btn" onclick="showSection('add-customer')">
            <i class="bi bi-person-plus me-2"></i>Add Customer
          </button>
          <button class="quick-action-btn" onclick="showSection('messaging')">
            <i class="bi bi-chat-dots me-2"></i>Send Message
          </button>
          <button class="quick-action-btn" onclick="generateReport()">
            <i class="bi bi-file-earmark-text me-2"></i>Generate Report
          </button>
          <button class="quick-action-btn" onclick="backupData()">
            <i class="bi bi-cloud-download me-2"></i>Backup Data
          </button>
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="content-card">
        <h4 class="mb-3">Recent Activity</h4>
        <div id="recentActivity">
          <p class="text-muted">No recent activity</p>
        </div>
      </div>
    </div>

    <!-- Customers Section -->
    <div id="customers-section" class="section" style="display: none;">
      <!-- Filters -->
      <div class="content-card">
        <h5 class="mb-3">Filters</h5>
        <div class="row">
          <div class="col-md-3">
            <select class="form-control-custom" id="filterStatus" onchange="applyFilters()">
              <option value="">All Status</option>
              <option value="Active">Active</option>
              <option value="Inactive">Inactive</option>
              <option value="Opt-Out">Opt-Out</option>
            </select>
          </div>
          <div class="col-md-3">
            <select class="form-control-custom" id="filterBranch" onchange="applyFilters()">
              <option value="">All Branches</option>
              <option value="Hamdan">Hamdan</option>
              <option value="Muroor">Muroor</option>
              <option value="Shabiya 11">Shabiya 11</option>
              <option value="Al Barsha">Al Barsha</option>
              <option value="Al Rigga">Al Rigga</option>
              <option value="Khalidiya">Khalidiya</option>
              <option value="Al Satwa">Al Satwa</option>
            </select>
          </div>
          <div class="col-md-6">
            <input type="text" class="form-control-custom" id="searchCustomers" placeholder="Search..." onkeyup="applyFilters()">
          </div>
        </div>
      </div>

      <!-- Customers Table -->
      <div class="content-card">
        <div class="card-header-custom">
          <h4 class="mb-0">Customer List</h4>
          <div>
            <input type="checkbox" id="selectAll" onchange="toggleSelectAll()">
            <label for="selectAll">Select All</label>
          </div>
        </div>
        <div class="table-responsive">
          <table class="data-table">
            <thead>
              <tr>
                <th><input type="checkbox" id="headerCheckbox" onchange="toggleSelectAll()"></th>
                <th onclick="sortTable('name')">Name <i class="bi bi-arrow-down-up"></i></th>
                <th onclick="sortTable('phone')">Phone <i class="bi bi-arrow-down-up"></i></th>
                <th onclick="sortTable('email')">Email <i class="bi bi-arrow-down-up"></i></th>
                <th onclick="sortTable('branch')">Branch <i class="bi bi-arrow-down-up"></i></th>
                <th onclick="sortTable('status')">Status <i class="bi bi-arrow-down-up"></i></th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="customersTableBody">
              <!-- Table rows will be dynamically added -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Add Customer Section -->
    <div id="add-customer-section" class="section" style="display: none;">
      <div class="content-card">
        <h4 class="mb-4">Add New Customer</h4>
        <form id="addCustomerForm">
          <div class="row">
            <div class="col-md-6">
              <div class="form-floating-custom">
                <label class="filter-label">First Name *</label>
                <input type="text" class="form-control-custom" id="firstName" required>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-floating-custom">
                <label class="filter-label">Last Name</label>
                <input type="text" class="form-control-custom" id="lastName">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-floating-custom">
                <label class="filter-label">Phone Number *</label>
                <input type="tel" class="form-control-custom" id="phoneNumber" required>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-floating-custom">
                <label class="filter-label">Email</label>
                <input type="email" class="form-control-custom" id="email">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-floating-custom">
                <label class="filter-label">Branch *</label>
                <select class="form-control-custom" id="branch" required>
                  <option value="">Select Branch</option>
                  <option value="Hamdan">Hamdan</option>
                  <option value="Muroor">Muroor</option>
                  <option value="Shabiya 11">Shabiya 11</option>
                  <option value="Al Barsha">Al Barsha</option>
                  <option value="Al Rigga">Al Rigga</option>
                  <option value="Khalidiya">Khalidiya</option>
                  <option value="Al Satwa">Al Satwa</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-floating-custom">
                <label class="filter-label">Status</label>
                <select class="form-control-custom" id="status">
                  <option value="Active">Active</option>
                  <option value="Inactive">Inactive</option>
                </select>
              </div>
            </div>
          </div>
          <div class="d-flex gap-2 mt-3">
            <button type="submit" class="btn btn-gradient">
              <i class="bi bi-save me-2"></i>Save Customer
            </button>
            <button type="button" class="btn btn-secondary" onclick="resetForm()">
              <i class="bi bi-arrow-clockwise me-2"></i>Reset
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Messaging Section -->
    <div id="messaging-section" class="section" style="display: none;">
      <div class="content-card">
        <h4 class="mb-4">Send Messages</h4>
        
        <!-- Message Type Selection -->
        <div class="row mb-4">
          <div class="col-md-12">
            <label class="filter-label">Message Type</label>
            <div class="btn-group w-100" role="group">
              <input type="radio" class="btn-check" name="msgType" id="msgWhatsApp" value="whatsapp" checked>
              <label class="btn btn-outline-success" for="msgWhatsApp">
                <i class="bi bi-whatsapp me-2"></i>WhatsApp
              </label>
              <input type="radio" class="btn-check" name="msgType" id="msgSMS" value="sms">
              <label class="btn btn-outline-primary" for="msgSMS">
                <i class="bi bi-chat-dots me-2"></i>SMS
              </input>
            </div>
          </div>
        </div>

        <!-- Recipients Selection -->
        <div class="row mb-4">
          <div class="col-md-6">
            <label class="filter-label">Select Recipients</label>
            <select class="form-control-custom" id="recipientType" onchange="updateRecipients()">
              <option value="all">All Active Customers</option>
              <option value="branch">By Branch</option>
              <option value="selected">Selected Customers</option>
            </select>
          </div>
          <div class="col-md-6" id="branchSelection" style="display: none;">
            <label class="filter-label">Select Branch</label>
            <select class="form-control-custom" id="msgBranch" onchange="updateRecipients()">
              <option value="Hamdan">Hamdan</option>
              <option value="Muroor">Muroor</option>
              <option value="Shabiya 11">Shabiya 11</option>
              <option value="Al Barsha">Al Barsha</option>
              <option value="Al Rigga">Al Rigga</option>
              <option value="Khalidiya">Khalidiya</option>
              <option value="Al Satwa">Al Satwa</option>
            </select>
          </div>
        </div>

        <!-- Message Templates -->
        <div class="mb-4">
          <label class="filter-label">Message Template</label>
          <div class="row">
            <div class="col-md-3">
              <select class="form-control-custom" id="msgTemplate" onchange="loadTemplate()">
                <option value="">Select Template</option>
                <option value="welcome">Welcome Message</option>
                <option value="promotion">Special Promotion</option>
                <option value="reminder">Appointment Reminder</option>
                <option value="feedback">Feedback Request</option>
                <option value="custom">Custom Message</option>
              </select>
            </div>
            <div class="col-md-9">
              <textarea class="form-control-custom" id="msgText" rows="4" placeholder="Type your message here..."></textarea>
            </div>
          </div>
        </div>

        <!-- Recipients Preview -->
        <div class="mb-4">
          <label class="filter-label">Recipients (<span id="recipientCount">0</span>)</label>
          <div class="border rounded p-3" style="max-height: 200px; overflow-y: auto;">
            <div id="recipientsList"></div>
          </div>
        </div>

        <!-- Send Button -->
        <button class="btn btn-success-gradient btn-lg" onclick="sendMessages()">
          <i class="bi bi-send me-2"></i>Send Messages
        </button>

        <!-- Message Progress -->
        <div class="message-progress" id="messageProgress">
          <h5 class="mb-3">Sending Progress</h5>
          <div id="progressList"></div>
        </div>

        <!-- WhatsApp Links -->
        <div class="whatsapp-links" id="whatsappLinks">
          <h5 class="mb-3">WhatsApp Links</h5>
          <p class="text-muted">Click on any link to open WhatsApp with pre-filled message</p>
          <div id="whatsappLinksList"></div>
        </div>
      </div>
    </div>

    <!-- Analytics Section -->
    <div id="analytics-section" class="section" style="display: none;">
      <div class="content-card">
        <h4 class="mb-4">Analytics Dashboard</h4>
        
        <!-- Chart Containers -->
        <div class="row">
          <div class="col-md-6">
            <h5 class="mb-3">Customer Growth</h5>
            <div class="chart-container">
              <canvas id="customerGrowthChart"></canvas>
            </div>
          </div>
          <div class="col-md-6">
            <h5 class="mb-3">Branch Distribution</h5>
            <div class="chart-container">
              <canvas id="branchDistributionChart"></canvas>
            </div>
          </div>
        </div>
        
        <div class="row mt-4">
          <div class="col-md-6">
            <h5 class="mb-3">Message Statistics</h5>
            <div class="chart-container">
              <canvas id="messageStatsChart"></canvas>
            </div>
          </div>
          <div class="col-md-6">
            <h5 class="mb-3">Customer Status</h5>
            <div class="chart-container">
              <canvas id="statusChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Settings Section -->
    <div id="settings-section" class="section" style="display: none;">
      <div class="content-card">
        <h4 class="mb-4">Settings</h4>
        
        <div class="mb-4">
          <h5>General Settings</h5>
          <div class="form-floating-custom">
            <label class="filter-label">Company Name</label>
            <input type="text" class="form-control-custom" id="companyName" value="Your Company">
          </div>
          <div class="form-floating-custom">
            <label class="filter-label">Company Phone</label>
            <input type="tel" class="form-control-custom" id="companyPhone" value="+971501882206">
          </div>
        </div>

        <button class="btn btn-success-gradient" onclick="saveSettings()">
          <i class="bi bi-save me-2"></i>Save Settings
        </button>
      </div>
    </div>
  </main>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="text-center">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3">Processing...</p>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Application State
    let customers = [];
    let messageLog = [];
    let settings = {
      companyName: 'Your Company',
      companyPhone: '+971501882206'
    };
    let selectedCustomers = new Set();
    let currentSection = 'dashboard';
    let sortColumn = 'addedDate';
    let sortDirection = 'desc';
    let charts = {};

    // Initialize Application
    document.addEventListener('DOMContentLoaded', function() {
      loadData();
      showSection('dashboard');
      updateMetrics();
      renderCustomers();
      initCharts();
      updateCharts();
    });

    // Load Data from LocalStorage
    function loadData() {
      const storedCustomers = localStorage.getItem('customers');
      const storedMessageLog = localStorage.getItem('messageLog');
      const storedSettings = localStorage.getItem('settings');

      if (storedCustomers) {
        customers = JSON.parse(storedCustomers);
      } else {
        // Initialize with sample data
        initializeSampleData();
      }

      if (storedMessageLog) {
        messageLog = JSON.parse(storedMessageLog);
      }

      if (storedSettings) {
        settings = JSON.parse(storedSettings);
      }
    }

    // Initialize Sample Data
    function initializeSampleData() {
      const sampleData = [
        { branch: 'Hamdan', mobile: '564394125', name: 'CHRISTINE JOY', email: 'christine@email.com' },
        { branch: 'Muroor', mobile: '527186938', name: 'REN ALVAREZ', email: 'ren@email.com' },
        { branch: 'Shabiya 11', mobile: '501320863', name: 'FARDUS KHAN', email: 'fardus@email.com' },
        { branch: 'Shabiya 11', mobile: '504007898', name: 'JUMANA SAEED', email: 'jumana@email.com' },
        { branch: 'Al Barsha', mobile: '567578678', name: 'CAMILLE SANTOS', email: 'camille@email.com' },
        { branch: 'Al Rigga', mobile: '569307444', name: 'ROSE WILSON', email: 'rose@email.com' },
        { branch: 'Hamdan', mobile: '501989046', name: 'MUSTAFA AHMED', email: 'mustafa@email.com' },
        { branch: 'Khalidiya', mobile: '505028089', name: 'YOUSEF KHALID', email: 'yousef@email.com' }
      ];

      customers = sampleData.map((item, index) => ({
        id: Date.now() + index,
        firstName: item.name.split(' ')[0],
        lastName: item.name.split(' ')[1] || '',
        phone: `+971${item.mobile}`,
        email: item.email,
        branch: item.branch,
        status: 'Active',
        addedDate: new Date(Date.now() - Math.random() * 90 * 24 * 60 * 60 * 1000).toISOString()
      }));

      saveData();
    }

    // Save Data to LocalStorage
    function saveData() {
      localStorage.setItem('customers', JSON.stringify(customers));
      localStorage.setItem('messageLog', JSON.stringify(messageLog));
      localStorage.setItem('settings', JSON.stringify(settings));
    }

    // Show Section
    function showSection(section) {
      // Hide all sections
      document.querySelectorAll('.section').forEach(s => {
        s.style.display = 'none';
      });

      // Show selected section
      document.getElementById(`${section}-section`).style.display = 'block';

      // Update sidebar active state
      document.querySelectorAll('.sidebar-menu a').forEach(a => {
        a.classList.remove('active');
      });
      event.target.classList.add('active');

      currentSection = section;

      // Section-specific initialization
      if (section === 'customers') {
        renderCustomers();
      } else if (section === 'analytics') {
        updateCharts();
      }
    }

    // Toggle Sidebar
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const mainContent = document.getElementById('mainContent');
      
      sidebar.classList.toggle('collapsed');
      mainContent.classList.toggle('expanded');
    }

    // Update Metrics
    function updateMetrics() {
      const total = customers.length;
      const active = customers.filter(c => c.status === 'Active').length;
      const thisMonth = customers.filter(c => {
        const addedDate = new Date(c.addedDate);
        const now = new Date();
        return addedDate.getMonth() === now.getMonth() && addedDate.getFullYear() === now.getFullYear();
      }).length;
      const messagesSent = messageLog.length;

      document.getElementById('totalCustomers').textContent = total;
      document.getElementById('activeCustomers').textContent = active;
      document.getElementById('newThisMonth').textContent = thisMonth;
      document.getElementById('messagesSent').textContent = messagesSent;
    }

    // Render Customers Table
    function renderCustomers() {
      const tbody = document.getElementById('customersTableBody');
      if (!tbody) return;

      tbody.innerHTML = '';

      let filtered = [...customers];

      // Apply filters
      const statusFilter = document.getElementById('filterStatus')?.value;
      const branchFilter = document.getElementById('filterBranch')?.value;
      const searchFilter = document.getElementById('searchCustomers')?.value.toLowerCase();

      if (statusFilter) {
        filtered = filtered.filter(c => c.status === statusFilter);
      }
      if (branchFilter) {
        filtered = filtered.filter(c => c.branch === branchFilter);
      }
      if (searchFilter) {
        filtered = filtered.filter(c => 
          (c.firstName && c.firstName.toLowerCase().includes(searchFilter)) ||
          (c.lastName && c.lastName.toLowerCase().includes(searchFilter)) ||
          c.phone.includes(searchFilter) ||
          (c.email && c.email.toLowerCase().includes(searchFilter))
        );
      }

      // Sort
      filtered.sort((a, b) => {
        let aVal = a[sortColumn] || '';
        let bVal = b[sortColumn] || '';
        
        if (sortColumn === 'addedDate') {
          aVal = new Date(aVal);
          bVal = new Date(bVal);
        }
        
        if (aVal < bVal) return sortDirection === 'asc' ? -1 : 1;
        if (aVal > bVal) return sortDirection === 'asc' ? 1 : -1;
        return 0;
      });

      filtered.forEach(customer => {
        const tr = document.createElement('tr');
        const fullName = `${customer.firstName || ''} ${customer.lastName || ''}`.trim();
        
        tr.innerHTML = `
          <td>
            <input type="checkbox" class="customer-checkbox" data-id="${customer.id}" onchange="toggleCustomerSelection('${customer.id}')">
          </td>
          <td>${fullName || '-'}</td>
          <td>${customer.phone}</td>
          <td>${customer.email || '-'}</td>
          <td>${customer.branch}</td>
          <td>
            <span class="status-badge status-${customer.status.toLowerCase()}">${customer.status}</span>
          </td>
          <td>
            <div class="action-buttons">
              <button class="btn-action btn-primary" onclick="editCustomer('${customer.id}')" title="Edit">
                <i class="bi bi-pencil"></i>
              </button>
              <button class="btn-action btn-success" onclick="quickMessage('${customer.id}')" title="Send Message">
                <i class="bi bi-send"></i>
              </button>
              <button class="btn-action btn-danger" onclick="deleteCustomer('${customer.id}')" title="Delete">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </td>
        `;
        tbody.appendChild(tr);
      });
    }

    // Sort Table
    function sortTable(column) {
      if (sortColumn === column) {
        sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
      } else {
        sortColumn = column;
        sortDirection = 'asc';
      }
      renderCustomers();
    }

    // Toggle Customer Selection
    function toggleCustomerSelection(customerId) {
      if (selectedCustomers.has(customerId)) {
        selectedCustomers.delete(customerId);
      } else {
        selectedCustomers.add(customerId);
      }
    }

    // Toggle Select All
    function toggleSelectAll() {
      const checkboxes = document.querySelectorAll('.customer-checkbox');
      const selectAll = document.getElementById('selectAll').checked || document.getElementById('headerCheckbox').checked;
      
      checkboxes.forEach(checkbox => {
        checkbox.checked = selectAll;
        const customerId = checkbox.dataset.id;
        if (selectAll) {
          selectedCustomers.add(customerId);
        } else {
          selectedCustomers.delete(customerId);
        }
      });
    }

    // Add Customer Form Submit
    document.getElementById('addCustomerForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const firstName = document.getElementById('firstName').value.trim();
      const lastName = document.getElementById('lastName').value.trim();
      const phone = document.getElementById('phoneNumber').value.trim();
      const email = document.getElementById('email').value.trim();
      const branch = document.getElementById('branch').value;
      const status = document.getElementById('status').value;

      if (!firstName || !phone || !branch) {
        showToast('Please fill in all required fields', 'error');
        return;
      }

      const newCustomer = {
        id: Date.now().toString(),
        firstName,
        lastName,
        phone,
        email,
        branch,
        status,
        addedDate: new Date().toISOString()
      };

      customers.push(newCustomer);
      saveData();
      
      showToast('Customer added successfully!', 'success');
      this.reset();
      
      if (currentSection === 'customers') {
        renderCustomers();
      }
      updateMetrics();
      updateCharts();
    });

    // Edit Customer
    function editCustomer(customerId) {
      const customer = customers.find(c => c.id === customerId);
      if (!customer) return;

      // Simple edit using prompt for demo
      const newFirstName = prompt('First Name:', customer.firstName);
      if (newFirstName !== null) {
        customer.firstName = newFirstName;
        saveData();
        renderCustomers();
        showToast('Customer updated!', 'success');
      }
    }

    // Delete Customer
    function deleteCustomer(customerId) {
      if (confirm('Are you sure you want to delete this customer?')) {
        customers = customers.filter(c => c.id !== customerId);
        saveData();
        renderCustomers();
        updateMetrics();
        updateCharts();
        showToast('Customer deleted!', 'success');
      }
    }

    // Quick Add Customer
    function quickAddCustomer() {
      showSection('add-customer');
    }

    // Apply Filters
    function applyFilters() {
      renderCustomers();
    }

    // Update Recipients for Messaging
    function updateRecipients() {
      const type = document.getElementById('recipientType').value;
      const branchSelection = document.getElementById('branchSelection');
      const recipientsList = document.getElementById('recipientsList');
      const recipientCount = document.getElementById('recipientCount');
      
      let recipients = [];
      
      if (type === 'all') {
        recipients = customers.filter(c => c.status === 'Active');
        branchSelection.style.display = 'none';
      } else if (type === 'branch') {
        const branch = document.getElementById('msgBranch').value;
        recipients = customers.filter(c => c.status === 'Active' && c.branch === branch);
        branchSelection.style.display = 'block';
      } else if (type === 'selected') {
        recipients = customers.filter(c => selectedCustomers.has(c.id));
        branchSelection.style.display = 'none';
      }
      
      // Display recipients
      recipientsList.innerHTML = recipients.map(c => 
        `<div class="mb-1">${c.firstName} ${c.lastName} (${c.phone})</div>`
      ).join('');
      
      recipientCount.textContent = recipients.length;
    }

    // Load Message Template
    function loadTemplate() {
      const template = document.getElementById('msgTemplate').value;
      const templates = {
        welcome: 'Welcome to our service! We\'re excited to have you with us.',
        promotion: 'Special offer just for you! Get 20% off on your next order.',
        reminder: 'This is a reminder for your upcoming appointment.',
        feedback: 'We value your feedback! Please rate your experience.',
        custom: ''
      };
      
      document.getElementById('msgText').value = templates[template] || '';
    }

    // Send Messages - WORKING IMPLEMENTATION
    async function sendMessages() {
      const messageText = document.getElementById('msgText').value.trim();
      const messageType = document.querySelector('input[name="msgType"]:checked').value;
      
      if (!messageText) {
        showToast('Please enter a message', 'error');
        return;
      }
      
      const recipientType = document.getElementById('recipientType').value;
      let recipients = [];
      
      if (recipientType === 'all') {
        recipients = customers.filter(c => c.status === 'Active');
      } else if (recipientType === 'branch') {
        const branch = document.getElementById('msgBranch').value;
        recipients = customers.filter(c => c.status === 'Active' && c.branch === branch);
      } else if (recipientType === 'selected') {
        recipients = customers.filter(c => selectedCustomers.has(c.id));
      }
      
      if (recipients.length === 0) {
        showToast('No recipients selected', 'error');
        return;
      }
      
      // Show progress
      const progressDiv = document.getElementById('messageProgress');
      const progressList = document.getElementById('progressList');
      progressDiv.classList.add('active');
      progressList.innerHTML = '';
      
      if (messageType === 'whatsapp') {
        // Show WhatsApp links section
        const whatsappLinks = document.getElementById('whatsappLinks');
        const whatsappLinksList = document.getElementById('whatsappLinksList');
        whatsappLinks.classList.add('active');
        whatsappLinksList.innerHTML = '';
        
        let successCount = 0;
        
        for (let i = 0; i < recipients.length; i++) {
          const customer = recipients[i];
          const phoneNumber = customer.phone.replace(/[^\d]/g, '');
          const encodedMessage = encodeURIComponent(messageText);
          const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
          
          // Add progress item
          const progressItem = document.createElement('div');
          progressItem.className = 'progress-item sending';
          progressItem.innerHTML = `
            <span>${customer.firstName} ${customer.lastName}</span>
            <span>Sending...</span>
          `;
          progressList.appendChild(progressItem);
          
          // Add WhatsApp link
          const linkItem = document.createElement('div');
          linkItem.className = 'whatsapp-link-item';
          linkItem.innerHTML = `
            <span>${customer.firstName} ${customer.lastName} (${customer.phone})</span>
            <a href="${whatsappUrl}" target="_blank" class="btn btn-success btn-sm">
              <i class="bi bi-whatsapp me-1"></i>Open WhatsApp
            </a>
          `;
          whatsappLinksList.appendChild(linkItem);
          
          // Simulate sending delay
          await new Promise(resolve => setTimeout(resolve, 500));
          
          // Update progress
          progressItem.className = 'progress-item sent';
          progressItem.querySelector('span:last-child').textContent = 'Ready to send';
          successCount++;
          
          // Log the message
          messageLog.push({
            customerId: customer.id,
            phone: customer.phone,
            type: 'whatsapp',
            message: messageText,
            timestamp: new Date().toISOString(),
            status: 'sent'
          });
        }
        
        saveData();
        updateMetrics();
        updateCharts();
        
        showToast(`Created ${successCount} WhatsApp links! Click the links below to send messages.`, 'success');
        
        // Open first WhatsApp link automatically
        if (recipients.length > 0) {
          const firstLink = whatsappLinksList.querySelector('a');
          if (firstLink) {
            setTimeout(() => {
              firstLink.click();
            }, 1000);
          }
        }
        
      } else if (messageType === 'sms') {
        // For SMS, copy phone numbers to clipboard
        const phoneNumbers = recipients.map(c => c.phone).join('\n');
        
        try {
          await navigator.clipboard.writeText(phoneNumbers);
          showToast(`${recipients.length} phone numbers copied to clipboard! Use your SMS app to send messages.`, 'success');
          
          // Log the messages
          recipients.forEach(customer => {
            messageLog.push({
              customerId: customer.id,
              phone: customer.phone,
              type: 'sms',
              message: messageText,
              timestamp: new Date().toISOString(),
              status: 'sent'
            });
          });
          
          saveData();
          updateMetrics();
          updateCharts();
        } catch (error) {
          showToast('Failed to copy phone numbers', 'error');
        }
      }
    }

    // Quick Message
    function quickMessage(customerId) {
      const customer = customers.find(c => c.id === customerId);
      if (!customer) return;
      
      const message = prompt(`Enter message for ${customer.firstName} ${customer.lastName}:`);
      if (message) {
        const phoneNumber = customer.phone.replace(/[^\d]/g, '');
        const encodedMessage = encodeURIComponent(message);
        const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
        
        window.open(whatsappUrl, '_blank');
        
        messageLog.push({
          customerId: customer.id,
          phone: customer.phone,
          type: 'whatsapp',
          message: message,
          timestamp: new Date().toISOString(),
          status: 'sent'
        });
        
        saveData();
        showToast('Message sent!', 'success');
        updateMetrics();
        updateCharts();
      }
    }

    // Initialize Charts
    function initCharts() {
      // Customer Growth Chart
      const growthCtx = document.getElementById('customerGrowthChart');
      if (growthCtx) {
        charts.growth = new Chart(growthCtx, {
          type: 'line',
          data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
              label: 'New Customers',
              data: [12, 19, 15, 25, 22, 30],
              borderColor: '#667eea',
              backgroundColor: 'rgba(102, 126, 234, 0.1)',
              tension: 0.4
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: true,
                position: 'top'
              }
            },
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });
      }

      // Branch Distribution Chart
      const branchCtx = document.getElementById('branchDistributionChart');
      if (branchCtx) {
        charts.branch = new Chart(branchCtx, {
          type: 'doughnut',
          data: {
            labels: [],
            datasets: [{
              data: [],
              backgroundColor: [
                '#667eea',
                '#764ba2',
                '#28a745',
                '#ffc107',
                '#dc3545',
                '#17a2b8',
                '#fd7e14'
              ]
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'right'
              }
            }
          }
        });
      }

      // Message Stats Chart
      const messageCtx = document.getElementById('messageStatsChart');
      if (messageCtx) {
        charts.message = new Chart(messageCtx, {
          type: 'bar',
          data: {
            labels: ['WhatsApp', 'SMS', 'Email'],
            datasets: [{
              label: 'Messages Sent',
              data: [0, 0, 0],
              backgroundColor: [
                '#25D366',
                '#007BFF',
                '#17a2b8'
              ]
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });
      }

      // Status Chart
      const statusCtx = document.getElementById('statusChart');
      if (statusCtx) {
        charts.status = new Chart(statusCtx, {
          type: 'pie',
          data: {
            labels: ['Active', 'Inactive', 'Opt-Out'],
            datasets: [{
              data: [0, 0, 0],
              backgroundColor: [
                '#28a745',
                '#ffc107',
                '#dc3545'
              ]
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'right'
              }
            }
          }
        });
      }
    }

    // Update Charts with Real Data
    function updateCharts() {
      if (!charts.branch || !charts.message || !charts.status) return;

      // Update Branch Distribution
      const branchCounts = {};
      customers.forEach(c => {
        branchCounts[c.branch] = (branchCounts[c.branch] || 0) + 1;
      });
      
      charts.branch.data.labels = Object.keys(branchCounts);
      charts.branch.data.datasets[0].data = Object.values(branchCounts);
      charts.branch.update();

      // Update Message Stats
      const messageCounts = { whatsapp: 0, sms: 0, email: 0 };
      messageLog.forEach(log => {
        if (messageCounts.hasOwnProperty(log.type)) {
          messageCounts[log.type]++;
        }
      });
      
      charts.message.data.datasets[0].data = [
        messageCounts.whatsapp,
        messageCounts.sms,
        messageCounts.email
      ];
      charts.message.update();

      // Update Status Chart
      const statusCounts = { Active: 0, Inactive: 0, 'Opt-Out': 0 };
      customers.forEach(c => {
        if (statusCounts.hasOwnProperty(c.status)) {
          statusCounts[c.status]++;
        }
      });
      
      charts.status.data.datasets[0].data = [
        statusCounts.Active,
        statusCounts.Inactive,
        statusCounts['Opt-Out']
      ];
      charts.status.update();

      // Update Customer Growth with real data
      if (charts.growth) {
        const monthlyData = getMonthlyCustomerCount();
        charts.growth.data.labels = monthlyData.labels;
        charts.growth.data.datasets[0].data = monthlyData.data;
        charts.growth.update();
      }
    }

    // Get Monthly Customer Count
    function getMonthlyCustomerCount() {
      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
      const currentMonth = new Date().getMonth();
      const data = [];
      
      for (let i = 5; i >= 0; i--) {
        const monthIndex = (currentMonth - i + 12) % 12;
        const monthStart = new Date();
        monthStart.setMonth(monthIndex, 1);
        monthStart.setHours(0, 0, 0, 0);
        
        const monthEnd = new Date(monthStart);
        monthEnd.setMonth(monthEnd.getMonth() + 1);
        
        const count = customers.filter(c => {
          const addedDate = new Date(c.addedDate);
          return addedDate >= monthStart && addedDate < monthEnd;
        }).length;
        
        data.push(count);
      }
      
      return {
        labels: months.slice(-6),
        data: data
      };
    }

    // Export Data
    function exportData() {
      let csv = 'ID,FirstName,LastName,Phone,Email,Branch,Status,AddedDate\n';
      
      customers.forEach(c => {
        csv += `"${c.id}","${c.firstName}","${c.lastName}","${c.phone}","${c.email}","${c.branch}","${c.status}","${c.addedDate}"\n`;
      });
      
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `customers_export_${new Date().toISOString().split('T')[0]}.csv`;
      a.click();
      
      showToast('Data exported successfully!', 'success');
    }

    // Backup Data
    function backupData() {
      const backup = {
        customers: customers,
        messageLog: messageLog,
        settings: settings,
        timestamp: new Date().toISOString()
      };
      
      const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `backup_${new Date().toISOString().split('T')[0]}.json`;
      a.click();
      
      showToast('Backup created successfully!', 'success');
    }

    // Generate Report
    function generateReport() {
      const report = {
        totalCustomers: customers.length,
        activeCustomers: customers.filter(c => c.status === 'Active').length,
        messagesSent: messageLog.length,
        branches: [...new Set(customers.map(c => c.branch))].length,
        generatedAt: new Date().toISOString()
      };
      
      const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `report_${new Date().toISOString().split('T')[0]}.json`;
      a.click();
      
      showToast('Report generated successfully!', 'success');
    }

    // Save Settings
    function saveSettings() {
      settings.companyName = document.getElementById('companyName').value;
      settings.companyPhone = document.getElementById('companyPhone').value;
      
      saveData();
      showToast('Settings saved successfully!', 'success');
    }

    // Show Loading
    function showLoading() {
      document.getElementById('loadingOverlay').classList.add('active');
    }

    // Hide Loading
    function hideLoading() {
      document.getElementById('loadingOverlay').classList.remove('active');
    }

    // Show Toast
    function showToast(message, type = 'success') {
      const toastHtml = `
        <div class="toast custom-toast align-items-center text-white bg-${type === 'success' ? 'success' : type === 'error' ? 'danger' : type === 'warning' ? 'warning' : 'info'} border-0" role="alert">
          <div class="d-flex">
            <div class="toast-body">
              ${message}
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
          </div>
        </div>
      `;
      
      const toastContainer = document.querySelector('.toast-container');
      const toastElement = document.createElement('div');
      toastElement.innerHTML = toastHtml;
      toastContainer.appendChild(toastElement.firstElementChild);
      
      const toast = new bootstrap.Toast(toastContainer.lastElementChild);
      toast.show();
      
      setTimeout(() => {
        if (toastContainer.lastElementChild) {
          toastContainer.lastElementChild.remove();
        }
      }, 5000);
    }

    // Reset Form
    function resetForm() {
      document.getElementById('addCustomerForm').reset();
    }
  </script>
</body>
</html>
